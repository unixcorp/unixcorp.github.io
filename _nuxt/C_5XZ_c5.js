import{_ as R,a as U,q as G}from"./DZzWZ6SW.js";import{g as x,v as $,x as J,y as d,z as _,A as K,B as W,C as X,D as Y,E as Z,G as z,H as I,I as ee,i as te,J as L,o as T,a as p,s as M,c as H,F as ae,p as ne,d as ie,K as le}from"./Dp06VGj_.js";import{u as A,s as oe,g as b,a as P,h as V,b as q,c as se}from"./Be-teYkr.js";import{h as re,a as ce}from"./CS917cZX.js";const ue={size:{type:[String,Number],default:"1em"},color:String};function fe(t){return{cSize:x(()=>t.size in A?`${A[t.size]}px`:t.size),classes:x(()=>"q-spinner"+(t.color?` text-${t.color}`:""))}}const{passive:f}=J,de=$({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:oe,initialIndex:{type:Number,default:0},disable:Boolean,reverse:Boolean},emits:["load"],setup(t,{slots:s,emit:c}){const l=d(!1),i=d(!0),v=d(null),m=d(null);let r=t.initialIndex,e,n;const y=x(()=>"q-infinite-scroll__loading"+(l.value===!0?"":" invisible"));function u(){if(t.disable===!0||l.value===!0||i.value===!1)return;const a=b(e),o=P(e),h=V(e);t.reverse===!1?Math.round(o+h+t.offset)>=Math.round(a)&&g():Math.round(o)<=t.offset&&g()}function g(){if(t.disable===!0||l.value===!0||i.value===!1)return;r++,l.value=!0;const a=b(e);c("load",r,o=>{i.value===!0&&(l.value=!1,I(()=>{if(t.reverse===!0){const h=b(e),O=P(e),Q=h-a;q(e,O+Q)}o===!0?S():v.value&&v.value.closest("body")&&n()}))})}function w(){r=0}function k(){i.value===!1&&(i.value=!0,e.addEventListener("scroll",n,f)),u()}function S(){i.value===!0&&(i.value=!1,l.value=!1,e.removeEventListener("scroll",n,f),n!==void 0&&n.cancel!==void 0&&n.cancel())}function E(){if(e&&i.value===!0&&e.removeEventListener("scroll",n,f),e=se(v.value,t.scrollTarget),i.value===!0){if(e.addEventListener("scroll",n,f),t.reverse===!0){const a=b(e),o=V(e);q(e,a-o)}u()}}function F(a){r=a}function D(a){a=parseInt(a,10);const o=n;n=a<=0?u:ee(u,isNaN(a)===!0?100:a),e&&i.value===!0&&(o!==void 0&&e.removeEventListener("scroll",o,f),e.addEventListener("scroll",n,f))}function N(a){if(C.value===!0){if(m.value===null){a!==!0&&I(()=>{N(!0)});return}const o=`${l.value===!0?"un":""}pauseAnimations`;Array.from(m.value.getElementsByTagName("svg")).forEach(h=>{h[o]()})}}const C=x(()=>t.disable!==!0&&i.value===!0);_([l,C],()=>{N()}),_(()=>t.disable,a=>{a===!0?S():k()}),_(()=>t.reverse,()=>{l.value===!1&&i.value===!0&&u()}),_(()=>t.scrollTarget,E),_(()=>t.debounce,D);let B=!1;K(()=>{B!==!1&&e&&q(e,B)}),W(()=>{B=e?P(e):!1}),X(()=>{i.value===!0&&e.removeEventListener("scroll",n,f)}),Y(()=>{D(t.debounce),E(),l.value===!1&&N()});const j=Z();return Object.assign(j.proxy,{poll:()=>{n!==void 0&&n()},trigger:g,stop:S,reset:w,resume:k,setIndex:F,updateScrollTarget:E}),()=>{const a=re(s.default,[]);return C.value===!0&&a[t.reverse===!1?"push":"unshift"](z("div",{ref:m,class:y.value},ce(s.loading))),z("div",{class:"q-infinite-scroll",ref:v},a)}}}),ve='<circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="60" cy="15" r="9" fill-opacity=".3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from=".5" to=".5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle>',me=$({name:"QSpinnerDots",props:ue,setup(t){const{cSize:s,classes:c}=fe(t);return()=>z("svg",{class:c.value,fill:"currentColor",width:s.value,height:s.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",innerHTML:ve})}}),ge={class:"row max-w-4xl mx-auto"},he={class:"col-12 pt-9 pb-4 px-4"},_e={class:"row"},pe={class:"row justify-center q-my-md"},Se={__name:"index",setup(t){const s=d([]),c=d(0),l=d(!1),i=new Date().getTime();async function v(m,r){if(l.value==!0){r();return}const e=await G("news").select("avatar","creator","title","description","path","meta").where("path","<","/news/"+i).order("path","DESC").limit(10).skip(c.value).all();e==null||(e.length>0?(e.forEach(n=>{s.value.push(n)}),c.value=c.value+e.length):e.length==0&&(l.value=!0)),r()}return(m,r)=>{const e=U,n=me,y=de,u=R;return T(),te(u,null,{default:L(()=>[p("div",ge,[p("div",he,[M(y,{onLoad:v,offset:250},{loading:L(()=>[p("div",pe,[M(n,{color:"primary",size:"40px"})])]),default:L(()=>[p("div",_e,[(T(!0),H(ae,null,ne(ie(s),(g,w)=>(T(),H("div",{class:"col-12 pt-8 pb-2 px-4 hover:bg-primary/5 hover:shadow-none shadow-lg shadow-yellow-500/5 transition duration-300",key:w},[M(e,le({ref_for:!0},g,{position:"horizontal"}),null,16)]))),128))])]),_:1})])])]),_:1})}}};export{Se as default};
